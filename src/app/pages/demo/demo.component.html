<main>
  <app-customize #customize [table]="table"></app-customize>
  <app-table
    [table]="table"
    [@zoomInUp]
    [style.--table-bg-color]="customize.bgColor"
    [style.--table-row-bg-color]="customize.rowBgColor"
    [style.--table-expand-row-bg-color]="customize.expandRowBgColor"
    [style.--table-header-row-bg-color]="customize.headerRowBgColor"
    [style.--table-footer-row-bg-color]="customize.footerRowBgColor"
    [style.--table-hover-row-bg-color]="customize.hoverRowBgColor"
    [style.--table-selected-row-bg-color]="customize.selectedRowBgColor"
    [style.--table-box-shadow]="'0 0 3px 1px ' + customize.boxShadow"
    [style.--table-border-color]="customize.borderColor"
    [style.--table-text-color]="customize.textColor">
    <ng-template tableTemplate="authorsTableTemplate" let-column let-row="row" let-index="index">
      @switch (column.field) {
        @case ('author') {
          <a href="javascript:" (click)="editRow(row, index)">{{ row[column.field] }}</a>
        }
        @case ('nationality') {
          <img class="padding-right" ngSrc="./favicon.ico" width="25" height="25" alt="Angular logo" />
          <span> {{ row[column.field] }}</span>
        }
        @case ('awardWinner') {
          @if (row[column.field]) {
            <mat-icon>done</mat-icon>
          } @else {
            <mat-icon>clear</mat-icon>
          }
        }
      }
    </ng-template>
    <ng-template tableTemplate="booksTableTemplate" let-column let-row="row" let-index="index">
      @switch (column.field) {
        @case ('title') {
          <span> {{ row[column.field] }}</span>
        }
      }
    </ng-template>
    <ng-template tableTemplate="booksCustomTemplate" let-row let-index="index">
      <div class="books-custom-template">
        @for (book of row.books; track book) {
          <div matRipple class="book-custom-template">
            <strong> {{ book.title }}</strong>
          </div>
        } @empty {
          {{ row.author }} doesn't have books yet!
        }
      </div>
    </ng-template>
    <ng-template tableTemplate="authorsPreviewTemplate" let-row let-index="index">
      {{ row.author }}
    </ng-template>
    <ng-template tableTemplate="booksPreviewTemplate" let-row let-index="index">
      {{ row.title }}
    </ng-template>
  </app-table>
</main>
